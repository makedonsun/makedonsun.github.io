{{- $type := .Get "type" | default "carousel" -}} {{- $show := .Get "show" |
default "1" | int -}} {{- $bg := .Get "bg" | default "white" -}} {{- $images :=
split (.Get "images") "," -}} {{- $captions := split (.Get "captions") "," -}}
{{- $descriptions := split (.Get "descriptions") "|" -}} {{- $size := split
(.Get "size") "," -}}{{- $total := len $images -}} {{- $numSlides := div (add
$total (sub $show 1)) $show -}} {{ if eq $type "carousel" }}
<div
  id="wineCarousel"
  class="carousel slide p-5"
  data-bs-ride="carousel"
  style="background-color: var(--light-gray)"
>
  <div class="carousel-inner">
    {{- range $slide := seq 0 (sub $numSlides 1) }}
    <div class="carousel-item {{ if eq $slide 0 }}active{{ end }}">
      <div class="container">
        <div class="row justify-content-center">
          {{- range $i := seq 0 (sub (sub $show 1) 0) }} {{- $index := add (mul
          $slide $show) $i -}} {{- if lt $index $total }}
          <div class="col-12 col-md-{{ div 12 $show }} mb-3">
            <div
              class="card h-100 shadow-sm m-3 d-flex flex-column justify-content-between align-items-center rounded"
              style="background-color: var(--dark-gray)"
            >
              <img
                src="/img/products/{{ index $images $index | urlize }}"
                class="card-img-top rounded"
                alt="Product"
              />
              <div class="card-body text-center">
                <h5 class="card-title">{{ index $captions $index }}</h5>
                {{ with index $size $index }}
                <p class="card-text small text-muted">{{ . }}</p>
                {{ end }} {{ with index $descriptions $index }}
                <p class="card-text small text-muted">{{ . }}</p>
                {{ end }}
              </div>
            </div>
          </div>
          {{ end }} {{ end }}
        </div>
      </div>
    </div>
    {{ end }}
  </div>

  <!-- Navigation Buttons -->
  <button
    class="carousel-control-prev black-carousel-control"
    type="button"
    data-bs-target="#wineCarousel"
    data-bs-slide="prev"
    style="top: 50%; transform: translateY(-50%); height: 3rem; width: 3rem"
  >
    <span
      class="carousel-control-prev-icon"
      aria-hidden="true"
      style="filter: invert(1)"
    ></span>
    <span class="visually-hidden">Previous</span>
  </button>

  <button
    class="carousel-control-next black-carousel-control"
    type="button"
    data-bs-target="#wineCarousel"
    data-bs-slide="next"
    style="top: 50%; transform: translateY(-50%); height: 3rem; width: 3rem"
  >
    <span
      class="carousel-control-next-icon"
      aria-hidden="true"
      style="filter: invert(1)"
    ></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

{{ else if eq $type "grid" }}
<div class="container py-5" style="background-color: antiquewhite">
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
    {{ range $index, $img := $images }}
    <div class="col">
      <div class="card h-100 shadow-sm">
        <img
          src="/img/products/{{ $img | urlize }}"
          class="card-img-top"
          alt="Product"
        />
        <div class="card-body text-center">
          <h5 class="card-title">{{ index $captions $index }}</h5>
          {{ with index $descriptions $index }}
          <p class="card-text small text-muted">{{ . }}</p>
          {{ end }}
        </div>
      </div>
    </div>
    {{ end }}
  </div>
</div>
{{ end }}
