{{- $type := .Get "type" | default "carousel" -}} {{- $show := .Get "show" |
default "1" | int -}} {{- $bg := .Get "bg" | default "white" -}} {{- $images :=
split (.Get "images") "," -}} {{- $captions := split (.Get "captions") "," -}}
{{- $descriptions := split (.Get "descriptions") "|" -}} {{- $size := split
(.Get "size") "," -}}{{- $total := len $images -}} {{- $numSlides := div (add
$total (sub $show 1)) $show -}} {{ if eq $type "carousel" }}
<div
  id="wineCarousel"
  class="carousel slide p-5"
  data-bs-ride="carousel"
  style="background-color: var(--beige)"
>
  <div class="carousel-inner">
    {{- range $slide := seq 0 (sub $numSlides 1) }}
    <div class="carousel-item {{ if eq $slide 0 }}active{{ end }}">
      <div class="container">
        <div class="row justify-content-center">
          {{- range $i := seq 0 (sub (sub $show 1) 0) }} {{- $index := add (mul
          $slide $show) $i -}} {{- if lt $index $total }}
          <div class="col-12 col-md-{{ div 12 $show }} mb-3">
            <div
              class="card h-100 m-3 d-flex flex-column align-items-end justify-content-between"
              style="background-color: transparent; border: none"
            >
              <div
                class="d-flex align-items-center rounded shadow-sm card-img"
                style="background-color: white"
              >
                <img
                  src="/img/products/{{ index $images $index | urlize }}"
                  class="card-img-top rounded"
                  alt="Product"
                />
              </div>

              <div class="text-center p-5 w-100">
                <h5 class="card-title">{{ index $captions $index }}</h5>
                {{ with index $size $index }}
                <p class="card-text small text-muted">{{ . }}</p>
                {{ end }}
              </div>
            </div>
          </div>

          {{ end }} {{ end }}
        </div>
      </div>
    </div>
    {{ end }}
  </div>

  <!-- Navigation Buttons -->
  <button
    class="carousel-control-prev black-carousel-control"
    type="button"
    data-bs-target="#wineCarousel"
    data-bs-slide="prev"
    style="top: 50%; transform: translateY(-50%); height: 3rem; width: 3rem"
  >
    <span
      class="carousel-control-prev-icon"
      aria-hidden="true"
      style="filter: invert(1)"
    ></span>
    <span class="visually-hidden">Previous</span>
  </button>

  <button
    class="carousel-control-next black-carousel-control"
    type="button"
    data-bs-target="#wineCarousel"
    data-bs-slide="next"
    style="top: 50%; transform: translateY(-50%); height: 3rem; width: 3rem"
  >
    <span
      class="carousel-control-next-icon"
      aria-hidden="true"
      style="filter: invert(1)"
    ></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

{{ end }}

<style>
  /* Make images pop and add hover animation */
  .card-img-top {
    transition: transform 0.3s ease, filter 0.3s ease;
  }

  .card-img-top:hover {
    transform: scale(1.03);
    filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.5));
    cursor: pointer;
  }

  .card-img {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .card-img:hover {
    transform: translateY(-5px); /* lift the card */
    box-shadow: 0 20px 35px rgba(0, 0, 0, 0.25);
  }
</style>
